# Руководство по настройке параметров HDBSCAN и UMAP

Подбор этих констант — это ключевой этап, который зависит от данных и целей анализа. Для набора данных размером около **16,000 записей** вот рекомендации:

---

### Параметры HDBSCAN

#### 1. `MIN_CLUSTER_SIZE` (текущее значение = 50)

*   **Что это:** Самый важный параметр. Он определяет минимальное количество точек, которое может считаться отдельным кластером. Все, что меньше, будет либо присоединено к соседнему кластеру, либо помечено как "шум".
*   **Как выбирать:**
    *   **Маленькое значение** (например, 15-30): Позволит выявить очень маленькие, нишевые темы. Вы получите больше кластеров, но некоторые из них могут быть незначительными.
    *   **Большое значение** (например, 100-200): Объединит мелкие группы в более крупные, оставив только самые большие и значимые кластеры.
*   **Рекомендация для 16k записей:** Значение **50** — это хорошая, сбалансированная отправная точка (соответствует ~0.3% данных).
    *   Если кластеров покажется слишком много, увеличьте значение до **75** или **100**.
    *   Если чувствуете, что упускаете мелкие, но интересные темы, уменьшите до **25-30**.

#### 2. `MIN_SAMPLES` (текущее значение = 5)

*   **Что это:** Насколько "консервативным" будет алгоритм. Определяет, сколько соседей должно быть у точки, чтобы она считалась "ядром" кластера. Чем выше значение, тем больше точек будет отнесено к шуму.
*   **Как выбирать:**
    *   **Маленькое значение** (1-5): Алгоритм будет стараться включить в кластеры как можно больше точек.
    *   **Большое значение** (15-30): Будут выделяться только самые плотные скопления, а количество "шума" возрастет.
*   **Рекомендация для 16k записей:** Оставьте значение **5**. Изменение `MIN_CLUSTER_SIZE` обычно дает более предсказуемый результат. Можно увеличить до **10-15**, если хотите сделать кластеры более четкими, пожертвовав частью точек в "шум".

---

### Параметры UMAP (влияют на визуализацию)

#### 1. `UMAP_N_NEIGHBORS` (текущее значение = 15)

*   **Что это:** Влияет на баланс между локальной (мелкой) и глобальной (общей) структурой данных на графике.
*   **Как выбирать:**
    *   **Маленькое значение** (5-10): Подчеркнет локальные связи, кластеры будут выглядеть более обособленными.
    *   **Большое значение** (30-50): Покажет более глобальную структуру, как кластеры связаны между собой.
*   **Рекомендация для 16k записей:** **15** — это стандартное, отличное значение. Начните с него.

#### 2. `UMAP_MIN_DIST` (текущее значение = 0.1)

*   **Что это:** Минимальное расстояние между точками на итоговом графике. Влияет на то, насколько "плотными" будут выглядеть кластеры.
*   **Как выбирать:**
    *   **Низкое значение** (0.0 - 0.05): Кластеры будут очень плотными и компактными.
    *   **Высокое значение** (0.3 - 0.5): Точки внутри кластеров будут распределены более "просторно".
*   **Рекомендация для 16k записей:** **0.1** — хороший стандарт. Если хотите сделать кластеры визуально более "сбитыми", попробуйте **0.0**.

---

### Итог

Начните со значений по умолчанию в скрипте. Они хорошо сбалансированы. После первого запуска посмотрите на результат (сколько кластеров, сколько шума, как выглядит график) и при необходимости скорректируйте в первую очередь `MIN_CLUSTER_SIZE`.
